<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Metadata about the document -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Training Session - Fitness Training App</title>

    <!-- Bootstrap CSS for styling -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS for additional styling -->
    <style>
        body {
            background: url('https://source.unsplash.com/1600x900/?workout') no-repeat center center fixed; /* Background image */
            background-size: cover; /* Cover the entire background */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: #fff;
            margin: 0;
        }
        .container {
            background: rgba(0, 0, 0, 0.8); /* Semi-transparent background for the form container */
            padding: 2rem; /* Padding inside the container */
            border-radius: 15px; /* Rounded corners */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5); /* Box shadow for depth */
            max-width: 600px; /* Maximum width of the container */
            width: 100%; /* Full width for smaller screens */
        }
        .container h1 {
            color: #fff;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7); /* Text shadow for better readability */
        }
        .form-control {
            border-radius: 0.5rem; /* Rounded corners for form controls */
            margin-bottom: 1rem; /* Margin below each form control */
        }
        .btn-primary {
            background-color: #28a745; /* Green color for the primary button */
            border: none;
            border-radius: 0.5rem; /* Rounded corners */
            padding: 0.75rem 1.5rem; /* Padding inside the button */
            font-size: 1rem;
            transition: background-color 0.3s; /* Smooth background color transition */
        }
        .btn-primary:hover {
            background-color: #218838; /* Darker green on hover */
        }
        .btn-secondary {
            background-color: #6c757d; /* Grey color for the secondary button */
            border: none;
            border-radius: 0.5rem; /* Rounded corners */
            padding: 0.75rem 1.5rem; /* Padding inside the button */
            font-size: 1rem;
            margin-top: 1rem; /* Margin above the button */
            transition: background-color 0.3s; /* Smooth background color transition */
        }
        .btn-secondary:hover {
            background-color: #5a6268; /* Darker grey on hover */
        }
    </style>

    <!-- jQuery library -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Go back button -->
        <button type="button" class="btn btn-secondary" onclick="history.back()">Go Back</button>

        <!-- Page header -->
        <h1 class="text-center">Create a New Training Session</h1>
        <form id="createSessionForm" class="mt-4">
            <!-- Session name input -->
            <div class="mb-3">
                <label for="name" class="form-label">Session Name</label>
                <input type="text" class="form-control" id="name" name="name" required>
            </div>
            <!-- Session date input -->
            <div class="mb-3">
                <label for="date" class="form-label">Date</label>
                <input type="date" class="form-control" id="date" name="date" required>
            </div>
            <!-- Session time input -->
            <div class="mb-3">
                <label for="hour" class="form-label">Time</label>
                <select class="form-control" id="hour" name="hour" required>
                    <option value="00:00">00:00</option>
                    <option value="00:30">00:30</option>
                    <option value="01:00">01:00</option>
                    <option value="01:30">01:30</option>
                    <option value="02:00">02:00</option>
                    <option value="02:30">02:30</option>
                    <option value="03:00">03:00</option>
                    <option value="03:30">03:30</option>
                    <option value="04:00">04:00</option>
                    <option value="04:30">04:30</option>
                    <option value="05:00">05:00</option>
                    <option value="05:30">05:30</option>
                    <option value="06:00">06:00</option>
                    <option value="06:30">06:30</option>
                    <option value="07:00">07:00</option>
                    <option value="07:30">07:30</option>
                    <option value="08:00">08:00</option>
                    <option value="08:30">08:30</option>
                    <option value="09:00">09:00</option>
                    <option value="09:30">09:30</option>
                    <option value="10:00">10:00</option>
                    <option value="10:30">10:30</option>
                    <option value="11:00">11:00</option>
                    <option value="11:30">11:30</option>
                    <option value="12:00">12:00</option>
                    <option value="12:30">12:30</option>
                    <option value="13:00">13:00</option>
                    <option value="13:30">13:30</option>
                    <option value="14:00">14:00</option>
                    <option value="14:30">14:30</option>
                    <option value="15:00">15:00</option>
                    <option value="15:30">15:30</option>
                    <option value="16:00">16:00</option>
                    <option value="16:30">16:30</option>
                    <option value="17:00">17:00</option>
                    <option value="17:30">17:30</option>
                    <option value="18:00">18:00</option>
                    <option value="18:30">18:30</option>
                    <option value="19:00">19:00</option>
                    <option value="19:30">19:30</option>
                    <option value="20:00">20:00</option>
                    <option value="20:30">20:30</option>
                    <option value="21:00">21:00</option>
                    <option value="21:30">21:30</option>
                    <option value="22:00">22:00</option>
                    <option value="22:30">22:30</option>
                    <option value="23:00">23:00</option>
                    <option value="23:30">23:30</option>
                </select>
            </div>
            <!-- Number of Trainees input -->
            <div class="mb-3">
                <label for="num_of_trainees" class="form-label">Number of Trainees</label>
                <input type="number" class="form-control" id="num_of_trainees" name="num_of_trainees" required>
            </div>
            <!-- Submit button -->
            <div class="text-center">
                <button type="submit" class="btn btn-primary">Create Session</button>
            </div>
        </form>
    </div>

    <script>
        $(document).ready(function() {
            // Function to get the current week's dates
            function getCurrentWeekDates() {
                var now = new Date();
                var dayOfWeek = now.getDay();
                var firstDayOfWeek = new Date(now);
                firstDayOfWeek.setDate(now.getDate() - dayOfWeek);
                var lastDayOfWeek = new Date(firstDayOfWeek);
                lastDayOfWeek.setDate(firstDayOfWeek.getDate() + 6);

                return {
                    minDate: firstDayOfWeek.toISOString().split('T')[0],
                    maxDate: lastDayOfWeek.toISOString().split('T')[0]
                };
            }

            // Set the min and max date for the date input
            var weekDates = getCurrentWeekDates();
            $('#date').attr('min', weekDates.minDate);
            $('#date').attr('max', weekDates.maxDate);

            // Form submission handler
            $('#createSessionForm').submit(function(e) {
                e.preventDefault(); // Prevent the default form submission
                var formData = {
                    name: $('#name').val(),
                    date: $('#date').val(),
                    hour: $('#hour').val(),
                    num_of_trainees: $('#num_of_trainees').val()
                };

                // Send AJAX request to create the session
                $.ajax({
                    type: 'POST',
                    url: 'create_session.php',
                    data: formData,
                    success: function(response) {
                        alert(response); // Show the response message
                        $('#createSessionForm')[0].reset(); // Reset the form
                    },
                    error: function() {
                        alert('Error creating session.'); // Show error message
                    }
                });
            });
        });
    </script>

    <!-- Bootstrap JS for additional functionality -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
